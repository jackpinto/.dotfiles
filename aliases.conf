# aliases
alias aliases='vim ~/.bash/aliases.conf'
alias wwwaliases='vim ~/.bash/wwwaliases.conf'
alias reload='. ~/bash_profile'

# utilities
function cssmin {
  csstidy $1 --preserve_css=false --silent=true --template=highest /tmp/csstidy
  cat /tmp/csstidy
  rm /tmp/csstidy
}

function jsmin {
	/bin/jsmin < $1 > /tmp/jsmin
	cat /tmp/jsmin
	rm /tmp/jsmin
}

alias encode-file='iconv -f ISO-8859-1 -t UTF-8'
alias usage='df -h'
alias space='du -sh ./*'
alias ll='ls -lha'
alias l='ll'
alias tu='top -o cpu'
alias tm='top -o vmstat'
alias f='free -m'
alias c='clear'
alias dc='cd -'
alias x='tar xzvf'
alias trim="tr -s \" \" | sed 's/^[ ]//g'"
alias total-files='ls -1 | wc -l | trim'
alias su='sudo -i'
function trail {
  echo "$(pwd)/$1"
}
function chmod-dir {
  echo "find ./ -type d -exec chmod oua+x {} \;"
}

# computer operations
alias port='sudo port'
alias flushdns='dscacheutil -flushcache'
alias eject='sudo drutil tray eject'
alias reboot='sudo reboot'
alias sleep='sudo shutdown -s now'
alias shutoff='sudo shutdown -h now'
alias printscreen='screencapture -iW'
alias copy='pbcopy'
alias whatismyip='curl -s http://www.whatismyip.com/automation/n09230945.asp | pbcopy; echo "your ip address is $(pbpaste) and has been copied to clipboard"'
alias localip='ifconfig | egrep -oEi "(192\.[0-9]+\.[0-9]+\.[0-9]+)" | sed "s/\ .*$//"'

# file system
alias o='open .'
alias ~='cd ~'
alias www='cd /www'
alias home='cd ~'
alias sites='www'
alias bash-dir='cd ~/.bash'
alias ssh-dir='cd ~/.ssh'
alias applications='cd ~/Applications'
alias documents='cd ~/Documents'
alias downloads='cd ~/Downloads'
alias projects='cd ~/Projects' 
alias pictures='cd ~/Pictures'
alias music='cd ~/Music'
alias movies='cd ~/Movies'
alias desktop='cd ~/Desktop'
alias public-key='cat ~/.ssh/id_rsa.pub | pbcopy; echo "public key copied to clipboard"'
alias hosts='sudo vim /etc/hosts'
alias phpini='sudo vim /private/etc/php.ini'

# local logs
alias syslog='tail -n 50 /var/log/system.log'

# httpd server
alias httpd-dir='cd /private/etc/apache2'
alias error-log='tail /private/var/log/apache2/error_log'
alias vhosts='sudo vim /private/etc/apache2/extra/httpd-vhosts.conf' 

# mysql server
alias mysql.server='sudo mysql.server'

# vim stuff
alias snippets='vim ~/.vim/bundle/snipMate/snippets'
alias wakerc='vim /www/wake/wake'
alias vim='mvim -N --remote-silent'
alias v='vim .'
alias vimrc='vim ~/.vimrc'
alias vim-dir='cd ~/.vim'
alias vim-bundle='cd ~/.vim/bundle/; git clone'

# rails Stuff
alias gem='rvmsudo gem'
function rvmrc {
  SITE=$1
  echo "rvm use $1" > ./.rvmrc
}
alias rvmbundle='rvmsudo gem install bundler'
alias server='rails s'
alias console='rails c'
alias gen='rails g'
alias bundle='rvmsudo bundle'
alias aa='annotate --before'
alias cc='cap deploy:cold'
alias dd='cap deploy'
alias mm='rake db:migrate'
alias mm='rake db:migrate'
alias rr='rake db:rollback'
function mmredo {
  rake db:migrate:redo VERSION=$1
}
function mmdown {
  rake db:migrate:down VERSION=$1
}

function create-mysql-user {
	echo "CREATE USER $1@localhost;"
	echo "SET PASSWORD FOR $1@locahost = PASSWORD('PASSWORD');"
	echo "GRANT ALL PRIVILEGES USER ON *.* TO $1@localhost;"
}

function new-vhost {
	NAME=$1
	mkdir "/www/$NAME"
	echo "<VirtualHost *:80>"
	echo "	ServerName $NAME"
	echo "	ServerAlias $NAME"
	echo "	DocumentRoot /Users/matias/Sites/$NAME"
	echo "	<Directory /Users/matias/Sites/$NAME>"
	echo "		Options Indexes FollowSymLinks MultiViews"
	echo "		AllowOverride All"
	echo "		Order allow,deny"
	echo "		allow from all"
	echo "	</Directory>"
	echo "</VirtualHost>"
}

alias lipsum='echo "Lorem ipsum dolor sit amet, consectetur adipiscing elit. In malesuada risus eu magna posuere eu laoreet odio ornare. Proin malesuada gravida magna at lacinia. Donec metus erat, rutrum sit amet faucibus quis, mattis at sem. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean feugiat nibh in quam facilisis a rutrum risus malesuada. Fusce libero libero, scelerisque eget luctus a, blandit vel nisi. Proin elit nisi, adipiscing nec congue et, ornare vel enim. Nam orci dui, volutpat vitae fringilla vitae, scelerisque ut neque. Etiam libero orci, consequat ac porttitor a, feugiat nec orci. Nullam volutpat rhoncus dolor sed pellentesque. Etiam ornare, enim molestie semper imperdiet, urna ligula porta massa, in tempor diam quam ut velit. Ut sit amet nulla sem, pellentesque bibendum elit. Sed lectus libero, iaculis a vestibulum at, laoreet tempor orci. Praesent scelerisque urna et velit eleifend viverra." | pbcopy; echo "copied to clipboard";'

# sites
alias gitbox='ssh gitbox'
alias pro-hpc.com='cd /www/pro-hpc.com/'
alias yearofmoo.com='cd /www/yearofmoo.com/blog'
alias wirehead.ca='cd /www/wirehead.ca'
alias wirehead.com='cd /www/wirehead.com'
alias wake='make -f /www/wake/wake'

# git stuff
alias total-commits="git shortlog | grep -E '^[ ]+\w+' | wc -l | trim"
alias add='git add .'
alias commit='git commit -am'
alias push='git push origin master'
alias gitabort='git rebase -i HEAD~5'
function g {
  if [ -n "$1" ]; then
    MESSAGE='Same commit message as last time'
  else
    MESSAGE=$1
  fi
  git add .
  git commit -am $MESSAGE
  git push origin master
}

# special Mounting Functions
function mount-ipad {
  if [ -n "$1" ]; then
    IP="192.168.1.103"
  else
    IP=$1
  fi
  if [ -e /Volumes/IPad ]; then
    mkdir /Volumes/IPad
  fi
  sshfs root@$IP:/ /Volumes/IPad -oauto_cache,reconnect,volname=IPad
}

function mount-iphone {
  if [ -n "$1" ]; then
    IP="192.168.1.103"
  else
    IP=$1
  fi
  if [ -e /Volumes/IPhone ]; then
    mkdir /Volumes/IPhone
  fi
  sshfs root@$IP:/ /Volumes/IPhone -oauto_cache,reconnect,volname=IPhone
}

function init-parallels {
  sudo kextutil "/Library/Parallels/Parallels Service.app/Contents/Kexts/10.6/prl_hypervisor.kext"
  sudo kextutil "/Library/Parallels/Parallels Service.app/Contents/Kexts/10.6/prl_hid_hook.kext"
  sudo kextutil "/Library/Parallels/Parallels Service.app/Contents/Kexts/10.6/prl_usb_connect.kext"
  sudo kextutil "/Library/Parallels/Parallels Service.app/Contents/Kexts/10.6/prl_netbridge.kext"
  sudo kextutil "/Library/Parallels/Parallels Service.app/Contents/Kexts/10.6/prl_vnic.kext"
}
